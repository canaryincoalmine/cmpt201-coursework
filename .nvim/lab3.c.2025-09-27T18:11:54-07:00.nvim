#include <stdio.h>
#include <stdlib.h>
#include <string.h>

const char *comp = "print";

void printInput(char **stringList, int i) {
  for (int n = 0; n < 5; ++n) {
    int curr = (i + n) % 5;
    if (stringList[curr] != NULL)
      printf("%s\n", stringList[curr]);
  }
}

void input(char **stringList, int i) {
  char *buffer = NULL;
  size_t size = 0;
  ssize_t num_char = getline(&buffer, &size, stdin);

  if (num_char == -1) {
    perror("getline failed");
    exit(EXIT_FAILURE);
  }

  if (stringList[i] != NULL)
    free(stringList[i]);
  stringList[i] = strdup(buffer);

  if (strcmp(buffer, comp) == 0)
    printInput(stringList, i);
}

int main() {
  int numStrings = 5;
  char **stringList = (char **)malloc(numStrings * sizeof(char *));

  for (int i = 0; i < numStrings; ++i)
    stringList[i] = NULL;

  int i = 0;

  while (1) {
    printf("Enter input: ");
    input(stringList, i);
    ++i;
    i = i % 5;
  }
}
